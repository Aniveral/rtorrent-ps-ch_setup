#!/bin/bash
# ~/.profile_functions: this will be included in ~/.profile or can be included in any script
# It contains alises like useful functions.


# python template file to generate the list
RTORPHANSTEMPLATE="orphans-ch.txt"

# define base dir for torrents (again) if it doesn't exist
[ -z "$RTHOME" ] && RTHOME="/mnt/Torrents"

# define incomplete dir (again) if it doesn't exist
[ -z "$INCOMPLETEDIR" ] && INCOMPLETEDIR="$RTHOME/.rtorrent/incomplete"


# list orphaned torrents
rtlistOrphans () {
    $HOME/bin/rtcontrol -qO $RTORPHANSTEMPLATE \*
}


# list stuck torrents in incomplete directory
rtlistStuck () {
    $HOME/bin/rtcontrol --column-headers --stats -qo size.sz,name,alias is_complete=yes "path=$INCOMPLETEDIR/*" | grep -v -e 'MIN of' -e 'MAX of' -e 'AVG of'
}


# list torrents with unusual trackers messages
rtlistMessages () {
    $HOME/bin/rtcontrol --column-headers --stats --sort-fields=message,path -qo size.sz,path,alias,message 'message=?*' message=\!*Tried?all?trackers* | sed "s#$RTHOME/##" | grep -v -e 'MIN of' -e 'MAX of' -e 'AVG of'
}


# list stopped torrents
rtlistStopped () {
    $HOME/bin/rtcontrol --column-headers --stats --from-view stopped --sort-fields=path -qo size.sz,path,alias \* | sed "s#$RTHOME/##" | grep -v -e 'MIN of' -e 'MAX of' -e 'AVG of'
}


